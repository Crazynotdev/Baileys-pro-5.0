<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Pair with Crazy Tech Inc</title>
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body {
      margin: 0;
      font-family: 'Outfit', sans-serif;
      background: linear-gradient(135deg, #1e1e2f, #2d2d44);
      color: white;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      align-items: center;
      justify-content: center;
      padding: 2rem;
    }

    .container {
      max-width: 450px;
      width: 100%;
      background: #2c2c3e;
      padding: 2rem;
      border-radius: 15px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.6);
      text-align: center;
      animation: fadeIn 1s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    h1 {
      font-size: 2rem;
      margin-bottom: 1rem;
      color: #58fcd6;
    }

    .description {
      font-size: 0.95rem;
      margin-bottom: 1.5rem;
      color: #dcdcdc;
    }

    img {
      width: 100px;
      margin-bottom: 1rem;
      border-radius: 50%;
      border: 2px solid #58fcd6;
    }

    .input-container {
      display: flex;
      background: #3c3c50;
      border-radius: 8px;
      overflow: hidden;
      margin-bottom: 1rem;
    }

    input {
      flex: 1;
      padding: 0.8rem;
      border: none;
      background: transparent;
      color: white;
      font-size: 1rem;
    }

    input:focus {
      outline: none;
    }

    button {
      background: #58fcd6;
      border: none;
      padding: 0.8rem 1rem;
      font-weight: bold;
      cursor: pointer;
      color: #1e1e2f;
      transition: background 0.3s ease;
    }

    button:hover {
      background: #3cf0c8;
    }

    #pair {
      margin-top: 1rem;
      font-weight: bold;
    }

    #copy {
      cursor: pointer;
      color: #ff6565;
      font-size: 1.1rem;
    }

    footer {
      margin-top: 3rem;
      font-size: 0.85rem;
      color: #aaa;
    }

    @media (max-width: 500px) {
      .container {
        padding: 1.5rem;
      }

      input, button {
        font-size: 0.95rem;
      }

      img {
        width: 80px;
      }
    }
  </style>
</head>
<body>

  <div class="container">
    <img src="https://i.ibb.co/QfzHwF7/crazy-logo.png" alt="Crazy Tech Logo">
    <h1>Crazy Tech Inc</h1>
    <p class="description">Entrez votre num√©ro WhatsApp avec l‚Äôindicatif du pays pour obtenir un code de pairage s√©curis√©.</p>

    <div class="input-container">
      <input type="number" id="number" placeholder="Ex: 241xxxxxxx">
      <button id="submit">Obtenir</button>
    </div>

    <div id="pair"></div>
  </div>

  <footer>¬© 2025 Crazy Tech Inc. Tous droits r√©serv√©s.</footer>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.0.0-alpha.1/axios.min.js"></script>
  <script>
    const numberInput = document.getElementById("number");
    const submitBtn = document.getElementById("submit");
    const pairDiv = document.getElementById("pair");

    async function Copy() {
      const copyText = document.getElementById("copy").innerText;
      await navigator.clipboard.writeText(copyText.replace('CODE: ', ''));
      const element = document.getElementById("copy");
      element.innerText = "COPI√â ‚úÖ";
      element.style.color = "#58fcd6";
      setTimeout(() => {
        element.innerText = copyText;
        element.style.color = "#ff6565";
      }, 2000);
    }

    submitBtn.addEventListener("click", async (e) => {
      e.preventDefault();
      const value = numberInput.value.trim();
      if (!value || value.length < 9) {
        pairDiv.innerHTML = `<p style="color: #ff6565;">Veuillez entrer un num√©ro valide avec indicatif pays.</p>`;
        return;
      }

      const sanitized = value.replace(/[^0-9]/g, '');
      numberInput.value = `+${sanitized}`;
      numberInput.style.color = "#58fcd6";

      pairDiv.innerHTML = `<p>üîÑ Veuillez patienter...</p>`;

      try {
        const { data } = await axios(`/code?number=${sanitized}`);
        const code = data.code || "Indisponible";
        pairDiv.innerHTML = `<div id="copy" onclick="Copy()">CODE: <span>${code}</span></div>`;
      } catch (err) {
        pairDiv.innerHTML = `<p style="color:red;">Erreur lors de la r√©cup√©ration du code.</p>`;
      }
    });
  </script>
</body>
</html>
